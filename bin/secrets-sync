#!/usr/bin/env bash

set -euo pipefail
DIR="$(cd "$(dirname "$0")"/.. && pwd)"
case "${1:-help}" in
  encrypt)   "$DIR/lib/encrypt.sh" "${@:2}" ;;
  upload)    "$DIR/lib/upload.sh" "${@:2}" ;;
  download)  "$DIR/lib/download.sh" "${@:2}" ;;
  decrypt)   "$DIR/lib/decrypt.sh" "${@:2}" ;;
  sync)      "$DIR/lib/encrypt.sh" && "$DIR/lib/upload.sh" ;;
  help|*)    echo "Usage: secrets-sync [encrypt|upload|download|decrypt|sync]";;
esac